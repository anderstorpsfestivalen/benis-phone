[general]
    entrypoint = "main"
    # AWS Polly specific
    # https://docs.aws.amazon.com/polly/latest/dg/voicelist.html
    default_tts_voice = "Astrid"
    # en-US , sv-SE
    # https://docs.aws.amazon.com/polly/latest/dg/SupportedLanguage.html
    default_tts_lang = "sv-SE"

# main
[[fn]]
    name = "main"
    prefix = { file = { src = "files/atp-intro.mp3" } }
    actions = [
        { num = 1, t = "fn", dst = "personalmenu" },
        { num = 2, t = "fn", dst = "uganda" },
        { num = 3, t = "srv", srv = { dst = "traintimes", tmpl = """{{.K.InformationOwner}}, 
        {{index .K.ProductInformation 0}}, 
        {{.K.TypeOfTraffic}} nummer,  
        {{.K.TechnicalTrainIdent}}, 
        Från {{.From.AdvertisedLocationName}},  
        Till {{.To.AdvertisedLocationName}},  
        avgår från spår: {{.K.TrackAtLocation}}, 
        klockan {{.Hour}} och {{.Minute}}""", args = { station = "Reftele" } } },
        { num = 4, t = "fn", dst = "systemetmenu" },
        { num = 5, t = "def", dst = "uganda" },
        { num = 11, t = "fn", dst = "dee" },
    ]

# personalmenu
[[fn]]
    name = "personalmenu"
    prefix = { tts = { voice = "Astrid", msg = """Personlig service meny,
    för saldo, tryck ett, för promille, tryck två,
    för fulöls poäng, tryck tre, för att gå tillbaka, tryck 0""" } }
    clear_callstack = true

    actions = [
        { t = "srv", dst = "balance" },
        { t = "srv", dst = "promille" },
        { t = "srv", dst = "fulolpoints" },
    ]


# uganda
[[fn]]
    name = "uganda"
    prefix = { tts = { voice = "Mads", msg = """TRYCK, ETT, till FYRKANT, 
    NOLL FÖR ATT GÅ TILLBAKA""", lang = "da-DK" } }

    actions = [
        { t = "randomfile", randomfile = { folder = "./files/ugandan/" } },
        { t = "file", file = { src = "files/ugandan/Commando-1.ogg" } },
        { t = "file", file = { src = "files/ugandan/Gwe-Gwe-Gwe.ogg" } },
        { t = "file", file = { src = "files/ugandan/One-hell-of-a-movie.ogg" } },
        { t = "file", file = { src = "files/ugandan/WHAT-THE-FU.ogg" } },
    ]

    # example
    # [[fn]]
    #     name = "example"
    #     prefix = { tts = {voice = "Astrid", msg = """this function
    #     has a lot of things so i can remember""", lang = "en-US" } }
    ##    this will ignore the callstack and go back to the entrypoint
    #     clear_callstack = true
    #     actions = [
    #         { t = "srv", dst= "balance"},
    #         { t = "srv", dst= "promille"},
    #         { t = "randomfile", randomfile = { folder = "./files/ugandan/" } },
    #         { t = "file", file = { src = "files/ugandan/Commando-1.ogg" } },
    #     ]
